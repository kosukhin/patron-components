<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .menu ul {
            padding: 0;
            display: flex;
            list-style-type: none;
            gap: 12px;
        }

        .page-content {
            max-width: 600px;
        }
    </style>
</head>

<body>
<h1>Route</h1>
<div class="menu">
    <ul>
        <li>
            <button onclick="route.page('/')">
                Главная
            </button>
        </li>
        <li>
            <button onclick="route.page('/two')">
                Вторая
            </button>
        </li>
        <li>
            <button onclick="route.page('/three')">
                Третья
            </button>
        </li>
    </ul>
</div>
<div class="loader">Идет загрузка</div>
<div class="page-content"></div>
<script type="importmap">
    {
      "imports": {
        "patron-oop": "https://cdn.jsdelivr.net/npm/patron-oop@1.13.0/dist/patron.mjs",
        "patron-web-api": "https://cdn.jsdelivr.net/npm/patron-web-api@1.6.0/dist/patron-web-api.mjs",
        "patron-components": "http://localhost:5500/dist/patron-components.mjs"
      }
    }
  </script>
<script type="module">
    import {Source, Factory, Patron} from 'patron-oop';
    import {
        HistoryCurrentPage,
        HistoryNewPage
    } from 'patron-web-api';
    import {Route, RouteDisplay, PageFetchTransport} from 'patron-components';

    const pageLoading = new Source(false);
    new VisibleElement(pageLoading, '.loader').watch();

    const pageSource = new Source({
        title: 'Главная',
        url: '/',
    });
    window.route = new Route(
        pageLoading,
        new Source('/examples/router/#'),
        new HistoryCurrentPage(pageSource),
        new HistoryNewPage(pageSource),
        new RouteDisplay('.page-content'),
        new Factory(PageFetchTransport)
    );
    route.routes(
        [
            {
                url: '/',
                template: 'main.html',
                page: new Page('Главная страница'),
                default: true,
            },
            {
                url: '/two',
                template: 'two.html',
                page: new Page('Вторая страница'),
            },
            {
                url: '/three',
                template: 'three.html',
                page: new Page('Третья страница'),
            },
        ],
    );
</script>
</body>

</html>
