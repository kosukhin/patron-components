import{give as e,Patron as t,GuestChain as r,Source as s,GuestMiddle as c,GuestCast as i}from"patron-oop";class o{constructor(e,t){this.basePath=e,this.template=t}content(t){fetch(this.basePath+"/"+this.template).then((e=>e.text())).then((r=>{e(r,t)}))}}class n{constructor(e,t,r,s,c){this.loading=e,this.basePath=t,this.currentPage=r,this.display=s,this.pageTransport=c}routes(e){const r=e.find((e=>e.default));this.firstLoad((()=>{this.currentPage.receiving(new t((t=>{this.loading.receive(!0),this.basePath.receiving((s=>{s=s.replace("/#","");let c="/"===t.url?s+"/":t.url;c=c.replace("#","").replace("//","/");let i=e.find((e=>s+e.url===c));!i&&r&&(i=r),i&&this.pageTransport.create(s,i.template).content((e=>{this.display.display(e),i.page.mounted(),this.loading.receive(!1)}))}))})))}))}firstLoad(t){const s=new r;this.basePath.receiving(s.receiveKey("basePath")),this.currentPage.receiving(s.receiveKey("currentPage")),s.result((()=>{e(null,t)}))}}class l{constructor(e){this.selector=e}display(e){const t=document.querySelector(this.selector);t&&(t.innerHTML=e)}}var a=Object.defineProperty,u=(e,t,r)=>((e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,t+"",r);class h{constructor(){u(this,"source",new s("/"));const e=location.href.replace(location.origin,"");console.log("url from consttructor",e),this.source.receive(e)}receive(e){return console.log("receive ourside"),this.source.receive(e),this}receiving(t){return this.source.receiving(new c(t,(r=>{console.trace("new url is",r),e({title:"Loading",url:r},t)}))),t}}class g{constructor(e,r){this.source=e;const s=document.querySelector(r);this.source.receiving(new t((e=>{s.value=String(e)}))),s.addEventListener("keyup",(()=>{this.receive(s.value)})),s.addEventListener("change",(()=>{this.receive(s.value)}))}receiving(e){return this.source.receiving(e),this}receive(e){return this.source.receive(e),this}}class v{constructor(e){this.selector=e}receive(e){const t=document.querySelector(this.selector);return t&&(t.style.display=e?"block":"none"),this}}class d{constructor(e){this.selector=e}receive(e){const t=document.querySelector(this.selector);return t&&(t.innerText=String(e)),this}}class p{constructor(e,t){this.linkSource=e,this.basePath=t}watchClick(e){const t=document.querySelector(e);if(!t)throw new Error(`Link wrapper not found for selector ${e}`);t.addEventListener("click",(e=>{e.preventDefault();let t=e?.target?.getAttribute("href");t||(t=e?.currentTarget?.getAttribute("href")),t&&this.basePath.receiving((e=>{this.linkSource.receive(e+t)}))}))}}class m{constructor(e,t){this.sources=e,this.selectorTemplate=t}element(t){const s=new r;this.sources.forEach((e=>{e.source.receiving(new i(t,s.receiveKey(e.placeholder)))})),s.result(new c(t,(r=>{let s=this.selectorTemplate;Object.entries(r).map((e=>{s=s.replaceAll(e[0],e[1])}));const c=document.querySelector(s);c&&e(c,t)})))}}class f{constructor(e,t){this.toggleClass=e,this.resetClassSelector=t}receive(e){return document.querySelectorAll(this.resetClassSelector).forEach((e=>{e.classList.remove(this.toggleClass)})),e.classList.add(this.toggleClass),this}}class y{constructor(e){this.title=e}mounted(){document.title=this.title}}export{f as ClassToggle,m as ComputedElement,h as CurrentPage,g as Input,p as Link,n as Navigation,y as Page,o as PageFetchTransport,l as RouteDisplay,d as Text,v as Visible};
//# sourceMappingURL=patron-components.min.mjs.map
