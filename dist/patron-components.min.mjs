import{give as e,GuestChain as t,Patron as s,Source as r,GuestCast as i,GuestMiddle as c}from"patron-oop";class o{constructor(e,t){this.basePath=e,this.template=t}content(t){fetch(this.basePath+"/"+this.template).then((e=>e.text())).then((s=>{e(s,t)}))}}class n{constructor(e,t,s,r,i){this.loading=e,this.basePath=t,this.currentPage=s,this.display=r,this.pageTransport=i}routes(e){const r=e.find((e=>e.default)),i=new t;this.basePath.value(new s(i.receiveKey("basePath"))),this.currentPage.value(new s(i.receiveKey("currentPage"))),i.result(new s((({basePath:t,currentPage:s})=>{const i=s.replace(t,""),c=e.find((e=>e.aliases&&(e.aliases.includes(s)||e.aliases.includes(i))));if(c&&c.url!==s){const e=t+c.url;return void this.currentPage.give(e)}let o=e.find((e=>e.url===i));if(!o&&r&&(o=r),!o)throw new Error("No matching route in Navigation");{const e=t.replace("/#","");this.loading.give(!0),this.pageTransport.create(e,o.template).content((e=>{this.display.display(e),o.page.mounted(),this.loading.give(!1)}))}})))}}class l{constructor(e){this.selector=e}display(e){const t=document.querySelector(this.selector);t&&(t.innerHTML=e)}}var a=Object.defineProperty,u=(e,t,s)=>((e,t,s)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);class h{constructor(){u(this,"source");const e=location.href.replace(location.origin,"");this.source=new r(e)}give(e){return this.source.give(e),this}value(e){return this.source.value(e),e}}class g{constructor(e,t){this.source=e;const r=document.querySelector(t);this.source.value(new s((e=>{r.value=String(e)}))),r.addEventListener("keyup",(()=>{this.give(r.value)})),r.addEventListener("change",(()=>{this.give(r.value)}))}value(e){return this.source.value(e),this}give(e){return this.source.give(e),this}}class d{constructor(e){this.selector=e}give(e){const t=document.querySelector(this.selector);return t&&(t.style.display=e?"block":"none"),this}}class v{constructor(e){this.selector=e}give(e){const t=document.querySelector(this.selector);return t&&(t.innerText=String(e)),this}}class p{constructor(e,t){this.linkSource=e,this.basePath=t}watchClick(e){const t=document.querySelector(e);if(!t)throw new Error(`Link wrapper not found for selector ${e}`);t.addEventListener("click",(e=>{e.preventDefault();let t=e?.target?.getAttribute("href");t||(t=e?.currentTarget?.getAttribute("href")),t&&this.basePath.value((e=>{this.linkSource.give(e+t)}))}))}}class m{constructor(e,t){this.sources=e,this.selectorTemplate=t}element(s){const r=new t;this.sources.forEach((e=>{e.source.value(new i(s,r.receiveKey(e.placeholder)))})),r.result(new c(s,(t=>{let r=this.selectorTemplate;Object.entries(t).map((e=>{r=r.replaceAll(e[0],e[1])}));const i=document.querySelector(r);i&&e(i,s)})))}}class y{constructor(e,t){this.toggleClass=e,this.resetClassSelector=t}give(e){return document.querySelectorAll(this.resetClassSelector).forEach((e=>{e.classList.remove(this.toggleClass)})),e.classList.add(this.toggleClass),this}}class f{constructor(e){this.title=e}mounted(){document.title=this.title}}class b{constructor(e,t){this.title=e,this.entryPointUrl=t}mounted(){document.title=this.title,import(this.entryPointUrl).then((e=>{e.main&&e.main()}))}}export{y as ClassToggle,m as ComputedElement,h as CurrentPage,b as EntryPointPage,g as Input,p as Link,n as Navigation,f as Page,o as PageFetchTransport,l as RouteDisplay,v as Text,d as Visible};
//# sourceMappingURL=patron-components.min.mjs.map
